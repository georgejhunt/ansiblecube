# the upstream component nginx needs to connect to
upstream captiveportal {
    server unix:///tmp/captiveportal.sock;
}

server {

## Captive portal listening on port 82 for HTTP and 83 for HTTPS

    listen	82;
    listen	[::]:82;
    listen	83 ssl;

## SSL certificate only used to allow forwarding of HTTPS requests. 

    ssl_certificate /etc/ssl/certs/ssl-cert-snakeoil.pem;
    ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key;

    location / {
        uwsgi_pass  captiveportal;
#        include     /var/ideascube/uwsgi_params;
    }
